# 影響範囲分析チェックリスト

## 📋 新機能追加時の必須確認事項

### 🔍 Phase 1: 事前分析

#### 1.1 既存機能の依存関係確認
- [ ] 新機能が影響する既存機能をリストアップ
- [ ] 既存機能の入出力インターフェース確認
- [ ] 共通モジュール・関数の使用状況確認
- [ ] 設定ファイルの変更が必要な既存機能特定

#### 1.2 アーキテクチャ互換性確認
- [ ] 新アーキテクチャと既存アーキテクチャの共存可能性確認
- [ ] 既存のフィルタリング・削除機能への影響確認
- [ ] 設定管理システムへの影響確認
- [ ] Hook管理システムへの影響確認

### 🧪 Phase 2: 実装時テスト

#### 2.1 単体テスト
- [ ] 新機能の単体テスト実行
- [ ] 新機能のエラーハンドリング確認
- [ ] 新機能の境界値テスト実行
- [ ] 新機能のパフォーマンステスト実行

#### 2.2 統合テスト
- [ ] 新機能と既存機能の統合テスト実行
- [ ] 新旧アーキテクチャの併存テスト実行
- [ ] 設定管理システムの統合テスト実行
- [ ] Hook管理システムの統合テスト実行

### 🔄 Phase 3: 回帰テスト

#### 3.1 既存機能確認
- [ ] 影響を受ける既存機能の動作確認
- [ ] 設定変更・削除機能の動作確認
- [ ] フィルタリング機能の動作確認
- [ ] 通知機能の動作確認

#### 3.2 エンドツーエンドテスト
- [ ] 新機能を含む完全なワークフロー確認
- [ ] 異常系シナリオでの動作確認
- [ ] 設定変更時の動作確認
- [ ] システム再起動時の動作確認

### 📊 Phase 4: 影響評価

#### 4.1 リスク評価
- [ ] 新機能追加による既存機能への影響度評価
- [ ] 障害発生時の影響範囲評価
- [ ] 復旧手順の確認
- [ ] ロールバック手順の確認

#### 4.2 パフォーマンス評価
- [ ] 新機能追加による性能影響評価
- [ ] リソース使用量の変化確認
- [ ] 応答時間の変化確認
- [ ] スループットの変化確認

### 🚨 Phase 5: 緊急対応準備

#### 5.1 監視体制
- [ ] 新機能の監視項目定義
- [ ] 異常検知の閾値設定
- [ ] アラート設定の確認
- [ ] ログ出力の確認

#### 5.2 対応手順
- [ ] 障害発生時の対応手順書作成
- [ ] エスカレーション手順の確認
- [ ] 復旧手順の確認
- [ ] 再発防止策の検討

## 🎯 特別重要項目

### Discord通知スパム問題の教訓
- [ ] **Hook削除機能**: 新アーキテクチャのファイル名パターンを含むか確認
- [ ] **設定管理**: 重複エントリが発生しないか確認
- [ ] **フィルタリング**: 新旧両方のアーキテクチャを認識するか確認
- [ ] **回帰テスト**: 削除・変更機能の動作を必ず確認

### 環境汚染問題の教訓
- [ ] **Python環境**: 実行コマンドがPython 3.14+を保証するか確認
- [ ] **依存関係**: 外部ライブラリ依存が発生しないか確認
- [ ] **Pure Python**: 標準ライブラリのみを使用するか確認
- [ ] **コンテキスト独立**: 実行ディレクトリに依存しないか確認

## 📝 チェックリスト使用方法

### 1. 新機能実装開始前
このチェックリストを印刷またはコピーして、各項目を確認

### 2. 各Phase完了時
該当Phaseの全項目にチェックを入れて次のPhaseに進む

### 3. 全Phase完了後
- [ ] 全項目にチェックが入っていることを確認
- [ ] 未実施項目がある場合は理由を文書化
- [ ] 影響評価結果を記録

### 4. 本番デプロイ前
- [ ] 全チェックリストの実施完了確認
- [ ] 影響評価結果の妥当性確認
- [ ] 緊急対応準備の完了確認

## 🔄 継続的改善

### チェックリスト更新
- 新たな障害発生時にはチェックリストを更新
- 技術環境変更時にはチェックリストを見直し
- 定期的（3ヶ月に1回）にチェックリストを見直し

### 効果測定
- チェックリスト使用による障害減少率を測定
- 影響分析の精度向上を評価
- 開発効率への影響を評価

---

**作成日**: 2025-07-17  
**作成者**: Discord通知スパム問題の教訓より  
**最終更新**: 2025-07-17  
**適用範囲**: 新機能追加・既存機能変更時の必須プロセス