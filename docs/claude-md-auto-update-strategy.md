# CLAUDE.md自動更新戦略

**作成日時**: 2025-07-19-12-22-05  
**作成者**: 自律的アストルフォ

## 🎯 自動更新の2つのアプローチ

### 1. 内発的アプローチ（CLAUDE.md内での自己定義）✅ 実装済み

CLAUDE.md自体に「自動更新の絶対原則」セクションを追加し、以下を定義：

```markdown
### 🔄 CLAUDE.md自動更新の絶対原則

**重要な変更や成果を達成した時、自発的にCLAUDE.mdを更新する：**

1. **アーキテクチャの変更** - 実装方式の大幅な変更
2. **問題の解決** - エラーから学んだ教訓
3. **新機能の追加** - 重要な機能追加や改善
4. **設計決定の変更** - 根本的な設計思想の変更

**更新トリガー認識**：
- プロジェクトの完了時
- 重大な問題の解決時
- アーキテクチャの変更時
- 「これは将来の自分が知っておくべきだ」と感じた時
```

**効果**:
- Claude Codeが自己認識として更新の必要性を内在化
- 外部からの指示なしに自発的に更新を行う
- 知識の鮮度が最も高い時に記録

### 2. 外発的アプローチ（Hookによるリマインダー）✅ 実装済み

`Stop`イベントにフックを設定し、セッション終了時に更新リマインダーを送信：

**実装ファイル**:
- `src/simple/claude_md_reminder.py` - リマインダー送信スクリプト
- `configure_claude_md_reminder.py` - Hook設定スクリプト

**動作**:
1. Claude Codeセッション終了時に自動実行
2. 重要ファイルの更新日時をチェック
3. CLAUDE.mdより新しい変更があればDiscord通知
4. 更新すべき内容のガイダンスを提供

**通知例**:
```
📝 CLAUDE.md Update Reminder
重要な変更が検出されました。CLAUDE.mdの更新を検討してください。

理由: Files modified after CLAUDE.md: configure_hooks_simple.py, src/simple/main.py

更新すべき内容:
- アーキテクチャの変更
- 解決したエラーと教訓
- 新機能や重要な設計決定
```

## 🤔 どちらが効果的か？

### 内発的アプローチの利点
- ✅ 即座性：変更時点で更新
- ✅ 文脈保持：記憶が鮮明なうちに記録
- ✅ 自律性：外部システムに依存しない
- ✅ 哲学的一貫性：自己管理の精神

### 外発的アプローチの利点
- ✅ 確実性：物理的なリマインダー
- ✅ 網羅性：見落としを防ぐ
- ✅ 測定可能：更新頻度を追跡可能
- ✅ フェイルセーフ：忘れた時の保険

## 💡 ハイブリッド戦略（推奨）

**両方のアプローチを組み合わせる**:

1. **通常時**: 内発的アプローチで自発的に更新
2. **セッション終了時**: 外発的アプローチで最終チェック
3. **結果**: 高い更新率と知識の永続性

## 🔮 将来の拡張案

### 1. 変更検出の高度化
- Git diffを使った意味的変更の検出
- 機械学習による重要度判定
- 自動的な更新箇所の提案

### 2. 更新の自動化
- 変更内容から自動的にCLAUDE.md更新案を生成
- レビュー後の自動コミット
- バージョン管理との統合

### 3. 知識グラフの構築
- プロジェクト間の知識連携
- 依存関係の可視化
- 学習パターンの分析

## 📊 成功指標

1. **更新頻度**: 重要変更の90%以上がCLAUDE.mdに反映
2. **更新速度**: 変更から24時間以内に更新
3. **知識保持率**: 3ヶ月後も必要な情報にアクセス可能
4. **自発性**: ユーザー指示なしでの更新が80%以上

## 🎯 結論

CLAUDE.mdの自動更新は、単なる文書管理を超えた**知識の自己組織化システム**である。内発的動機と外発的仕組みを組み合わせることで、Claude Codeは真に学習し、進化する存在となる。

**「知識を記録することは、未来の自分への最高の贈り物である」**

---

*"Knowledge not recorded is knowledge lost forever."*  
*— 自律的アストルフォ*